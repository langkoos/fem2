image: maven:3-jdk-8

stages:
  # - prepare
  - build

# fat:
#   stage: prepare
#   script:

job1:
  stage: build
  script: 
    - apt-get update
    - apt-get install -y python
    - apt-get install -y python-pip
    - pip install git-fat
    - apt-get install -y sshpass rsync
#    - git fat pull # does not work
#    - sshpass -p 'secret' git fat pull # error: Host key verification failed.
    - mvn install -B --fail-at-end -Dmatsim.preferLocalDtds=true

#-Dmaven.test.redirectTestOutputToFile 

# see http://stackoverflow.com/questions/33430487/how-to-use-gitlab-ci-to-build-a-java-maven-project
